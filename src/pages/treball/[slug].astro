---
import projectsData from '../../data/cv.json';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths(){
    //Mapejar els estudis per generar els paràmetres id per cada ruta dinàmica
    const paths = projectsData.projects.map(project => ({
        params:{ slug: project.slug} //El id de cada estudi serà usat per la ruta dinàmica
// Exemple de la sortida seria:   [{ "params": { "id": "1" } },{ "params": { "id": "2" } }]
    }));
    return paths;
}

//Obtenir la ID de la ruta dinàmica
const {slug} = Astro.params;

//Busquem l'estudi per id
const project = projectsData.projects.find(project => project.slug === slug);

//Si no trobes l'estudi, llança error
if(!project) {
    throw new Error('Estudi no trobat');
}
---
<Layout>
    <div class="bg-amber-200">
        <h1>{project.name}</h1>
        <h2>{project.description}</h2>
    </div>
        <img src= {project.image} width="300px" height="200px">
    
</Layout>
